(this["webpackJsonpresources-list"]=this["webpackJsonpresources-list"]||[]).push([[0],{24:function(e,t,a){e.exports=a(49)},29:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(21),o=a.n(c),i=(a(29),a(7)),l=a(5),u=a(22),s=a(11),m=a.n(s),d=a(16),p=a(15),g=a(10),f=a(12),b=Object(n.createContext)(),v=function(e){var t=e.reducer,a=e.initialState,c=e.children;return r.a.createElement(b.Provider,{value:Object(n.useReducer)(t,a)},c)},h=function(){return Object(n.useContext)(b)},E=f.initializeApp({apiKey:"AIzaSyCPbuYMie4GZcZdpTNBLGiAIOs2TEcdW2E",authDomain:"resources-list-cdcc1.firebaseapp.com",databaseURL:"https://resources-list-cdcc1.firebaseio.com",projectId:"resources-list-cdcc1",storageBucket:"resources-list-cdcc1.appspot.com",messagingSenderId:"110668222898",appId:"1:110668222898:web:44a887a3e34b43195554ab",measurementId:"G-X3GCL5JFCL"}).firestore(),y=f.auth(),j=new f.auth.GoogleAuthProvider,O=E,w=Object(g.a)({myForm:{width:"100%",display:"grid",gridTemplateColumns:"0.6fr",justifyContent:"center",paddingTop:"1rem"},myFormControls:{display:"grid",gridTemplateColumns:"1fr"},button:{marginRight:0},"@media screen and (max-width: 32em)":{myForm:{width:"85vw",gridTemplateColumns:"1fr"},myFormControls:{flexDirection:"column"}}});var k=function(e){var t=e.id,a=w(),n=h(),c=Object(l.a)(n,1)[0].user,o=r.a.useState({title:"",link:""}),u=Object(l.a)(o,2),s=u[0],g=u[1],b=function(e){g(Object(i.a)(Object(i.a)({},s),{},Object(p.a)({},e.target.name,e.target.value)))},v=function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),s.title&&s.link){e.next=3;break}return e.abrupt("return");case 3:if(!t){e.next=7;break}return e.next=6,O.collection("categories").doc(t).collection("items").add({title:s.title,link:s.link,timestamp:f.firestore.FieldValue.serverTimestamp(),userId:c.uid});case 6:g({title:"",link:""});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{className:a.myForm,onSubmit:v},r.a.createElement("div",{className:a.myFormControls},r.a.createElement("textarea",{col:"4",rows:"4",type:"text",name:"title",placeholder:"Name and/or description",onChange:b,value:s.title,required:!0}),r.a.createElement("input",{type:"url",name:"link",className:a.button,placeholder:"Link",onChange:b,value:s.link,required:!0}),r.a.createElement("input",{className:"input button",type:"submit",value:"ADD"})))};var C=function(e){var t=e.values,a=e.change;return Object(n.useEffect)((function(){if(t.length>0){var e={target:{value:t[0].id}};a(e)}}),[t]),r.a.createElement(r.a.Fragment,null,t.length>0?r.a.createElement("select",{name:"categories",className:"input select",onChange:a,defaultValue:t[0].id},r.a.createElement("option",{value:""},"Category"),t.map((function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("select",{className:"input select"},r.a.createElement("option",{value:""},"Category"),r.a.createElement("option",{value:""},"Loading..."))))};var x=function(e){var t=e.categoryId,a=e.item,n=function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=3;break}return e.next=3,O.collection("categories").doc(t).collection("items").doc(a).delete();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"card"},r.a.createElement("h1",null,r.a.createElement("a",{href:a.link,target:"_blank",rel:"noopener noreferrer"},a.link)),r.a.createElement("blockquote",null,a.title),r.a.createElement("div",{className:"item__footer"},a.timestamp&&r.a.createElement("small",null,new Date(a.timestamp.toDate()).toUTCString()),r.a.createElement("button",{onClick:function(){window.confirm("Are you sure you wish to delete this item?")&&n(a.id)}},"Remove")))},S=Object(g.a)({container:{width:"60vw",marginTop:"4.5rem",marginBottom:"1rem",padding:"1rem",display:"flex",flexDirection:"column"},"@media screen and (max-width: 32em)":{container:{width:"85vw"}}});var N=function(e){var t=e.isLoading,a=e.categoryId,n=e.data,c=S();return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("div",{className:"loader loader-sm"},"Loading..."):r.a.createElement("div",{className:c.container},n.map((function(e){return r.a.createElement(x,{categoryId:a,item:e,key:e.title})}))))},I="SET_USER",F=function(e,t){switch(t.type){case I:return Object(i.a)(Object(i.a)({},e),{},{user:t.user});default:return e}},L=Object(g.a)({login:{width:"60%",height:"100%",display:"grid",padding:"1rem",placeContent:"center","& div":{display:"flex",flexDirection:"column",alignItems:"center","& h1":{textAlign:"center",paddingBottom:"2rem",color:"rgba(255,255,255,0.87)"},"& button":{width:"300px",backgroundColor:"#D67AB1",color:"#f2f2f2",fontWeight:600,border:"none",borderRadius:"5px"}}}});var D=function(){var e=L(),t=h(),a=Object(l.a)(t,2),c=(a[0],a[1]),o=Object(n.useState)(!0),i=Object(l.a)(o,2),u=i[0],s=i[1];return Object(n.useEffect)((function(){var e=y.onAuthStateChanged((function(t){s(!1),c({type:I,user:t}),e()}))}),[]),u?r.a.createElement("div",{className:e.login},r.a.createElement("div",{className:"loader"},"Loading...")):r.a.createElement("div",{className:e.login},r.a.createElement("div",null,r.a.createElement("h1",null,"No registration required, sign in with your google account"),r.a.createElement("button",{type:"button",className:"input button",name:"signIn",onClick:function(){y.signInWithPopup(j).then((function(e){c({type:I,user:e.user})})).catch((function(e){alert(e.message)}))}},"Sign In")))},T=function(e){var t=e.logout;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"input logout",onClick:t},"Sign out"))};var A=function(){var e=h(),t=Object(l.a)(e,2),a=t[0].user;return t[1],r.a.createElement("img",{className:"user-profile",src:a?null===a||void 0===a?void 0:a.photoURL:"",alt:"Loading..."})};var B=function(){var e=h(),t=Object(l.a)(e,2),a=t[0].user,c=t[1],o=Object(n.useState)({backgroundColor:"transparent"}),s=Object(l.a)(o,2),m=s[0],d=s[1],p=Object(n.useState)(!0),g=Object(l.a)(p,2),f=g[0],b=g[1],v=Object(n.useState)([]),E=Object(l.a)(v,2),j=E[0],w=E[1],x=Object(n.useState)([]),S=Object(l.a)(x,2),F=S[0],L=S[1],B=Object(n.useState)(""),P=Object(l.a)(B,2),R=P[0],G=P[1];return Object(u.useScrollPosition)((function(e){e.prevPos;var t=e.currPos;t.y<-100?d({backgroundColor:"rgba(255,255,255,0.87)",boxShadow:"0px 4px 3px 0px rgba(0, 0, 0, 0.1)"}):t.y>-100&&"transparent"!==m.backgroundColor&&d({backgroundColor:"transparent"})}),[m]),Object(n.useEffect)((function(){a&&O.collection("categories").onSnapshot((function(e){var t=e.docs;w(t.map((function(e,t){return{id:e.id,name:e.data().name}})))}))}),[a]),r.a.createElement(r.a.Fragment,null,a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header",style:Object(i.a)({},m)},r.a.createElement(C,{values:j,change:function(e){var t=e.target.value;t&&(G(t),O.collection("categories").doc(t).collection("items").where("userId","==",a.uid).orderBy("timestamp","asc").onSnapshot((function(e){return L(e.docs.map((function(e){var t=e.data(),a=e.id;return Object(i.a)(Object(i.a)({},t),{},{id:a})})))}))),b(!1)}}),r.a.createElement(A,null),r.a.createElement(T,{logout:function(){y.signOut(),c({type:I,user:""})}})),r.a.createElement(N,{categoryId:R,isLoading:f,data:F}),r.a.createElement(k,{id:R})):r.a.createElement(D,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,{initialState:{user:null},reducer:F},r.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.82c013b8.chunk.js.map